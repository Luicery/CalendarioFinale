(this["webpackJsonpcalendar-project-react"]=this["webpackJsonpcalendar-project-react"]||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(20),r=a.n(s),o=(a(58),a(4)),c=a(5),l=a(7),m=a(6),p=a(8),d=(a(32),a(1)),h=a(10),u=a.n(h),v=(a(76),a(24)),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).saveAppointment=function(){u.a.post("http://localhost:3000/appointments",{title:a.state.title,description:a.state.description,address:a.state.address,date:a.state.date,time:a.state.time,timeTo:a.state.timeTo,aside:a.state.aside,asideTo:a.state.asideTo}).then((function(e){return e}))},a.handleChange=function(e){"time"===e.target.name?(console.log(e.target.value),parseInt(e.target.value.substr(0,2))>12?(console.log(e.target.value),a.setState({time:e.target.value,aside:"pm"})):a.setState({time:e.target.value,aside:"am"})):"timeTo"===e.target.name?parseInt(e.target.value.substr(0,2))>12?a.setState({timeTo:e.target.value,asideTo:"pm"}):a.setState({timeTo:e.target.value,asideTo:"am"}):a.setState(Object(v.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){a.saveAppointment(),a.goBack(),e.preventDefault()},a.goBack=function(){var e=a.props.match.params,t=e.day,n=e.month,i=e.year;a.props.history.push("/calendar/".concat(t,"/").concat(n,"/").concat(i,"/"))},a.state={title:"",description:"",time:"",timeTo:"",aside:"",asideTo:"",address:"",date:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.day,a=e.month,n=e.year;this.setState({date:"".concat(n,"-").concat(a,"-").concat(t)})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("button",{onClick:this.goBack},"Back"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",name:"title",placeholder:"Title",onChange:this.handleChange}),i.a.createElement("br",null),i.a.createElement("input",{type:"text",name:"description",placeholder:"Description",onChange:this.handleChange}),i.a.createElement("br",null),i.a.createElement("input",{type:"text",name:"address",placeholder:"Address",onChange:this.handleChange}),i.a.createElement("br",null),i.a.createElement("input",{type:"time",name:"time",placeholder:"Time",onChange:this.handleChange}),i.a.createElement("br",null),i.a.createElement("input",{type:"time",name:"timeTo",placeholder:"TimeTo",onChange:this.handleChange}),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",onSubmit:this.handleSubmit,value:"Make Appointment"})))}}]),t}(i.a.Component),f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={appointments:[],appointmentsToday:[],time:""},a.linkToCreate=function(){a.props.history.push("/calendar/".concat(a.props.match.params.day,"/").concat(a.props.match.params.month,"/").concat(a.props.match.params.year,"/create/appointment"))},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e.day,e.month,e.year;this.fetchAppointments(),this.changeTime()}},{key:"componentWillUnmount",value:function(){console.log(this)}},{key:"changeTime",value:function(){var e=this;setInterval((function(){var t=(new Date).getTime(),a=new Date(t).toTimeString().substr(0,8);e.setState({time:a})}),500)}},{key:"fetchAppointments",value:function(){var e=this;u.a.get("http://localhost:3000/appointments.json").then((function(t){e.setState({appointments:t.data}),console.log(t.data),e.findAppointmentsToday()})).catch((function(e){return console.warn(e)}))}},{key:"findAppointmentsToday",value:function(){var e=this,t=this.state.appointments.filter((function(t){return t.date==="".concat(e.props.match.params.year,"-").concat(e.props.match.params.month,"-").concat(e.props.match.params.day)}));this.setState({appointmentsToday:t}),this.renderAppointmentsToday()}},{key:"renderAppointmentsToday",value:function(){for(var e=this,t=document.getElementsByClassName("timeOfDay"),a=function(a){for(var n=0;n<t.length;n++)e.state.appointmentsToday[a].time.substr(11,2)===t[n].innerText.substr(0,2)&&"am"===e.state.appointmentsToday[a].aside?(t[n].classList.add("highlight"),t[n].addEventListener("click",(function(t){e.props.history.push("".concat(e.props.history.location.pathname,"/").concat(e.state.appointmentsToday[a].id))}))):parseInt(e.state.appointmentsToday[a].time.substr(11,2))-12===t[n].innerText.substr(0,2)&&"pm"===e.state.appointmentsToday[a].aside&&(t[n].classList.add("highlight"),t[n].addEventListener("click",(function(t){e.props.history.push("".concat(e.props.history.location.pathname,"/").concat(e.state.appointmentsToday[a].id))})))},n=0;n<this.state.appointmentsToday.length;n++)a(n)}},{key:"render",value:function(){return i.a.createElement("div",{className:"dateTime"},i.a.createElement("div",{id:"Time",className:"timeOfDay"},i.a.createElement("span",null,"Date:",this.props.match.params.day,"/",this.props.match.params.month,"/",this.props.match.params.year,i.a.createElement("h1",null,this.state.time))),i.a.createElement("div",{onClick:this.linkToCreate},"+"),i.a.createElement("div",{id:"12am",className:"timeOfDay"},"12am"),i.a.createElement("div",{id:"01am",className:"timeOfDay"},"01am"),i.a.createElement("div",{id:"02am",className:"timeOfDay"},"02am"),i.a.createElement("div",{id:"03am",className:"timeOfDay"},"03am"),i.a.createElement("div",{id:"04am",className:"timeOfDay"},"04am"),i.a.createElement("div",{id:"05am",className:"timeOfDay"},"05am"),i.a.createElement("div",{id:"06am",className:"timeOfDay"},"06am"),i.a.createElement("div",{id:"07am",className:"timeOfDay"},"07am"),i.a.createElement("div",{id:"08am",className:"timeOfDay"},"08am"),i.a.createElement("div",{id:"09am",className:"timeOfDay"},"09am"),i.a.createElement("div",{id:"10am",className:"timeOfDay"},"10am"),i.a.createElement("div",{id:"11am",className:"timeOfDay"},"11am"),i.a.createElement("div",{id:"12pm",className:"timeOfDay"},"12pm"),i.a.createElement("div",{id:"01pm",className:"timeOfDay"},"01pm"),i.a.createElement("div",{id:"02pm",className:"timeOfDay"},"02pm"),i.a.createElement("div",{id:"03pm",className:"timeOfDay"},"03pm"),i.a.createElement("div",{id:"04pm",className:"timeOfDay"},"04pm"),i.a.createElement("div",{id:"05pm",className:"timeOfDay"},"05pm"),i.a.createElement("div",{id:"06pm",className:"timeOfDay"},"06pm"),i.a.createElement("div",{id:"07pm",className:"timeOfDay"},"07pm"),i.a.createElement("div",{id:"08pm",className:"timeOfDay"},"08pm"),i.a.createElement("div",{id:"09pm",className:"timeOfDay"},"09pm"),i.a.createElement("div",{id:"10pm",className:"timeOfDay"},"10pm"),i.a.createElement("div",{id:"11pm",className:"timeOfDay bottomBorder"},"11pm"))}}]),t}(i.a.Component),y=a(25),E={width:"80%",height:"50%"},b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(y.Map,{google:this.props.google,zoom:8,style:E,initialCenter:{lat:-33.8714234,lng:151.2044743}},i.a.createElement(y.Marker,{position:{lat:this.props.latitudeFromParent,lng:this.props.longitudeFromParent}})))}}]),t}(i.a.Component),O=Object(y.GoogleApiWrapper)({apiKey:"AIzaSyB2ai0xcVHX45ezIGP-E-wXg3ZKlZyzP5s"})(b),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={title:"",description:"",date:"",time:"",timeTo:"",aside:"",asideTo:"",lat:"",lng:"",weatherPlace:"",weatherTemp:"",weatherMain:"",weatherDesc:""},a.getWeather=function(){u.a.get("http://api.openweathermap.org/data/2.5/weather?lat=".concat(a.state.lat,"&lon=").concat(a.state.lng,"&APPID=44c4ec8bdab3135de4699fa100275470")).then((function(e){a.setState({weatherPlace:e.data.name,weatherTemp:Math.round(e.data.main.temp-273.15),weatherDesc:e.data.weather[0].description,weatherMain:e.data.weather[0].main})})).catch(console.warn())},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;e.day,e.month,e.year,e.appointment_id;this.fetchAppointments()}},{key:"fetchAppointments",value:function(){var e=this;u.a.get("".concat("http://localhost:3000/appointments","/").concat(this.props.match.params.event,".json")).then((function(t){e.setState({time:t.data.time.substr(11,8),title:t.data.title,description:t.data.description,date:t.data.date,timeTo:t.data.timeTo.substr(11,8),aside:t.data.aside,asideTo:t.data.asideTo,lat:t.data.latitude,lng:t.data.longitude}),e.getWeather()})).catch((function(e){return console.warn(e)}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,"Title: ",this.state.title),i.a.createElement("div",null,"Description: ",this.state.description),i.a.createElement("div",null,"Time: ",this.state.time," ",i.a.createElement("span",null," ",this.state.aside)),i.a.createElement("div",null,"Time To: ",this.state.timeTo," ",i.a.createElement("span",null," ",this.state.asideTo)),i.a.createElement("div",null,"Date: ",this.state.date),i.a.createElement("div",null,"Weather in ",this.state.weatherPlace,": ",this.state.weatherTemp,"\xb0C with ",this.state.weatherMain),i.a.createElement(O,{longitudeFromParent:this.state.lng,latitudeFromParent:this.state.lat}))}}]),t}(i.a.Component),T=(i.a.Component,a(18)),j=a.n(T),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={userReceived:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"login",value:function(){var e={auth:{email:j()("#email").val(),password:j()("#password").val()}};j.a.ajax({url:"http://localhost:3000/api/user_token",type:"POST",data:e,dataType:"json",success:function(e){localStorage.setItem("jwt",e.jwt)}})}},{key:"getUser",value:function(e){var t,a=this,n="Bearer "+localStorage.getItem("jwt");t=e?"http://localhost:3000/api/users":"http://localhost:3000/api/users/5",u.a.get(t,{params:{},headers:{Authorization:n}}).then((function(e){console.log(e),a.setState({userReceived:e.data}),console.log(a.state.userReceived)})).catch(console.warn())}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("h1",{style:{marginTop:"20vh",marginBottom:"5vh"}}),i.a.createElement("form",null,i.a.createElement("label",{htmlFor:"email"},"Email: "),i.a.createElement("br",null),i.a.createElement("input",{name:"email",id:"email",type:"email"}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("label",{htmlFor:"password"},"Password:"),i.a.createElement("br",null),i.a.createElement("input",{name:"password",id:"password",type:"password"})),i.a.createElement("br",null),i.a.createElement("button",{onClick:this.login},"Login"),i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return e.getUser(!0)},style:{marginTop:"10vh"}},"Get User"),i.a.createElement("p",null,this.state.appointmentsReceived))}}]),t}(i.a.Component),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,i=t.value;a.setState(Object(v.a)({},n,i))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password,password_confirmation:t.password_confirmation};console.log("user",n),u.a.post("http://localhost:3000/api/users",{user:n}).then((function(e){console.log("response",e)})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/")},a.state={email:"",password:"",password_confirmation:"",errors:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.password_confirmation;return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Sign Up"),i.a.createElement("form",{onSubmit:this.handleSubmit},"\u200b",i.a.createElement("input",{placeholder:"email",type:"text",name:"email",value:t,onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",type:"password",name:"password",value:a,onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password confirmation",type:"password",name:"password_confirmation",value:n,onChange:this.handleChange}),"\u200b",i.a.createElement("button",{placeholder:"submit",type:"submit"},"Sign Up"),"\u200b"))}}]),t}(i.a.Component),D=a(52),S=a.n(D),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={date:new Date,appointmentsReceived:[],loginPressed:!1,signupPressed:!1},a.onChange=function(e){return a.setState({date:e})},a.clickDay=function(e){var t=e.toString().split(" "),n=t[2],i=t[1],s=t[3];i=["01","02","03","04","05","06","07","08","09","10","11","12"][["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(i)];var r="/calendar/".concat(n,"/").concat(i,"/").concat(s);a.props.history.push(r)},a.ShowLogin=function(){a.setState({loginPressed:!0,signupPressed:!1})},a.closeLogin=function(){a.setState({loginPressed:!1,signupPressed:!1})},a.ShowSignup=function(){a.setState({signupPressed:!0,loginPressed:!1})},a.closeSignup=function(){a.setState({signupPressed:!1,loginPressed:!1})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,!1===this.state.loginPressed&&i.a.createElement("div",{onClick:this.ShowLogin},"Login"),!0===this.state.loginPressed&&i.a.createElement("div",{onClick:this.closeLogin},"X"),!0===this.state.loginPressed&&i.a.createElement("div",null,i.a.createElement(k,null)),!1===this.state.loginPressed&&!1===this.state.signupPressed&&i.a.createElement(S.a,{onChange:this.onChange,value:this.state.state,onClickDay:this.clickDay}),!0===this.state.signupPressed&&i.a.createElement("div",{onClick:this.closeSignup},"X"),i.a.createElement("span",{onClick:this.ShowSignup},!1===this.state.signupPressed&&i.a.createElement("div",{onClick:this.Signup},"Signup"),!0===this.state.signupPressed&&!1===this.state.loginPressed&&i.a.createElement("div",null,i.a.createElement(C,null))))}}]),t}(i.a.Component),N=a(16),A=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(d.a,null,i.a.createElement(N.a,{exact:!0,path:"/",component:P}),i.a.createElement(N.a,{exact:!0,path:"/calendar/:day/:month/:year/create/appointment",component:g}),i.a.createElement(N.a,{exact:!0,path:"/calendar/:day/:month/:year",component:f}),i.a.createElement(N.a,{exact:!0,path:"/calendar/:day/:month/:year/:event",component:w})))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},32:function(e,t,a){},53:function(e,t,a){e.exports=a(108)},58:function(e,t,a){},76:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.0054899b.chunk.js.map